<!DOCTYPE html>
<html class="client-nojs" lang="en-CA" dir="ltr">

<!-- Mirrored from docs.derivative.ca/Custom_Operators by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 24 May 2025 00:56:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Custom Operators - Derivative</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"5422aeb25bb46944dbf9e441","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Custom_Operators","wgTitle":"Custom Operators","wgCurRevisionId":29158,"wgRevisionId":29158,"wgArticleId":2321,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgPageContentLanguage":"en-ca","wgPageContentModel":"wikitext","wgRelevantPageName":"Custom_Operators","wgRelevantArticleId":2321,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCargoDefaultQueryLimit":100,"wgCargoMapClusteringMinimum":80,
"wgCargoMonthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"wgCargoMonthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgCargoWeekDays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"wgCargoWeekDaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"wgPageFormsTargetName":null,"wgPageFormsAutocompleteValues":[],"wgPageFormsAutocompleteOnAllChars":false,"wgPageFormsFieldProperties":[],"wgPageFormsCargoFields":[],"wgPageFormsDependentFields":[],"wgPageFormsCalendarValues":[],"wgPageFormsCalendarParams":[],"wgPageFormsCalendarHTML":null,"wgPageFormsGridValues":[],"wgPageFormsGridParams":[],"wgPageFormsContLangYes":null,"wgPageFormsContLangNo":null,"wgPageFormsContLangMonths":[],"wgPageFormsHeightForMinimizingInstances":800,"wgPageFormsShowOnSelect":[],"wgPageFormsScriptPath":"/extensions/PageForms","edgValues":[],"wgPageFormsEDSettings":null,
"wgAmericanDates":false,"wgVector2022PreviewPages":[]};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.Lingo.styles":"ready","skins.vector.styles.legacy":"ready"};RLPAGEMODULES=["ext.UiTag","ext.Lingo","site","mediawiki.page.ready","mediawiki.toc","skins.vector.legacy.js"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="load1652.css?lang=en-ca&amp;modules=ext.Lingo.styles%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="load4355.php?lang=en-ca&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load7c2b.css?lang=en-ca&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.39.0"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta name="viewport" content="width=1000"/>
<link rel="icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Derivative (en-ca)"/>
<link rel="EditURI" type="application/rsd+xml" href="api-result251f.xml?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="Derivative Atom feed" href="https://docs.derivative.ca/index.php?title=Special:RecentChanges&amp;feed=atom"/>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-3123499-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-3123499-6');
</script>
<meta property="og:title" content="Custom Operators"/>
<meta property="og:site_name" content="Derivative"/>
<meta property="og:url" content="https://docs.derivative.ca/Custom_Operators"/>
<meta property="og:image" content="https://docs.derivative.ca/resources/assets/logo.png"/>
<meta property="article:modified_time" content="2023-07-26T23:15:54Z"/>
<meta property="article:published_time" content="2023-07-26T23:15:54Z"/>
<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"Article","name":"Custom Operators - Derivative","headline":"Custom Operators - Derivative","mainEntityOfPage":"<span class=\"mw-page-title-main\">Custom Operators<\/span>","identifier":"https:\/\/docs.derivative.ca\/Custom_Operators","url":"https:\/\/docs.derivative.ca\/Custom_Operators","dateModified":"2023-07-26T23:15:54Z","datePublished":"2023-07-26T23:15:54Z","image":{"@type":"ImageObject","url":"https:\/\/docs.derivative.ca\/resources\/assets\/logo.png"},"author":{"@type":"Organization","name":"Derivative","url":"https:\/\/docs.derivative.ca","logo":{"@type":"ImageObject","url":"https:\/\/docs.derivative.ca\/resources\/assets\/logo.png","caption":"Derivative"}},"publisher":{"@type":"Organization","name":"Derivative","url":"https:\/\/docs.derivative.ca","logo":{"@type":"ImageObject","url":"https:\/\/docs.derivative.ca\/resources\/assets\/logo.png","caption":"Derivative"}},"potentialAction":{"@type":"SearchAction","target":"https:\/\/docs.derivative.ca\/index.php?title=Special:Search&search={search_term}","query-input":"required name=search_term"}}</script>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Custom_Operators rootpage-Custom_Operators skin-vector action-view skin-vector-legacy vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Custom Operators</span></h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Derivative</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en-CA" dir="ltr"><div class="mw-parser-output"><div class="mw-parser-output"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en-CA" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul><li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a>
<ul><li class="toclevel-2 tocsection-2"><a href="#Security_and_Safety"><span class="tocnumber">1.1</span> <span class="toctext">Security and Safety</span></a></li>
</ul></li>
<li class="toclevel-1 tocsection-3"><a href="#Using_Custom_OPs_-_Plugin_Folder_Locations"><span class="tocnumber">2</span> <span class="toctext">Using Custom OPs - Plugin Folder Locations</span></a>
<ul><li class="toclevel-2 tocsection-4"><a href="#Project_Specific_Custom_OPs"><span class="tocnumber">2.1</span> <span class="toctext">Project Specific Custom OPs</span></a></li>
</ul></li>
<li class="toclevel-1 tocsection-5"><a href="#Creating_Custom_OPs"><span class="tocnumber">3</span> <span class="toctext">Creating Custom OPs</span></a>
<ul><li class="toclevel-2 tocsection-6"><a href="#Sample_Projects"><span class="tocnumber">3.1</span> <span class="toctext">Sample Projects</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Converting_existing_CPlusPlus_projects_to_Custom_OPs"><span class="tocnumber">3.2</span> <span class="toctext">Converting existing CPlusPlus projects to Custom OPs</span></a>
<ul><li class="toclevel-3 tocsection-8"><a href="#Header_Files"><span class="tocnumber">3.2.1</span> <span class="toctext">Header Files</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Plugin_Information"><span class="tocnumber">3.2.2</span> <span class="toctext">Plugin Information</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Changed_functions"><span class="tocnumber">3.2.3</span> <span class="toctext">Changed functions</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#OP_String"><span class="tocnumber">3.2.4</span> <span class="toctext">OP_String</span></a></li>
</ul></li>
<li class="toclevel-2 tocsection-12"><a href="#Building_on_macOS_using_XCode"><span class="tocnumber">3.3</span> <span class="toctext">Building on macOS using XCode</span></a></li>
</ul></li>
<li class="toclevel-1 tocsection-13"><a href="#Issues_Loading_Custom_Operators"><span class="tocnumber">4</span> <span class="toctext">Issues Loading Custom Operators</span></a>
<ul><li class="toclevel-2 tocsection-14"><a href="#Windows"><span class="tocnumber">4.1</span> <span class="toctext">Windows</span></a>
<ul><li class="toclevel-3 tocsection-15"><a href="#Delay_Loaded_Libraries"><span class="tocnumber">4.1.1</span> <span class="toctext">Delay Loaded Libraries</span></a></li>
</ul></li>
<li class="toclevel-2 tocsection-16"><a href="#macOS"><span class="tocnumber">4.2</span> <span class="toctext">macOS</span></a>
<ul><li class="toclevel-3 tocsection-17"><a href="#Plugin_Build_Setup:"><span class="tocnumber">4.2.1</span> <span class="toctext">Plugin Build Setup:</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Library_or_Framework_Setup:"><span class="tocnumber">4.2.2</span> <span class="toctext">Library or Framework Setup:</span></a></li>
</ul></li>
</ul></li>
</ul></div>

<h2><span class="mw-headline" id="Overview">Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=1" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>A Custom OP can be created for a <a href="TOP.html" title="TOP">TOP</a>, <a href="CHOP.html" title="CHOP">CHOP</a>, <a href="SOP.html" title="SOP">SOP</a>, and <a href="DAT.html" title="DAT">DAT</a> types. A Custom OP is an operator created by a 3rd party using TouchDesigner's C++ API, but they behave just like the built-in operators that TouchDesigner has. Custom OPs are very similar to the <a href="CPlusPlus_TOP.html" title="CPlusPlus TOP">CPlusPlus TOP</a>,  <a href="CPlusPlus_CHOP.html" title="CPlusPlus CHOP">CPlusPlus CHOP</a>, <a href="CPlusPlus_SOP.html" title="CPlusPlus SOP">CPlusPlus SOP</a>, and <a href="CPlusPlus_DAT.html" title="CPlusPlus DAT">CPlusPlus DAT</a> operators, but they have their own unique names and appear in the OP Create menu for better integration in TouchDesigner. Use them like regular built-in operators.
</p>
<h3><span class="mw-headline" id="Security_and_Safety">Security and Safety</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=2" title="Edit section: Security and Safety">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Since a Custom OP is created with binary code that is loaded and executed in TouchDesigner, it can contain malicious code. To help with this, before loading any binary TouchDesigner will check if that binary has been loaded on that machine before. If being loaded for the first time, a dialog will be presented asking for permission to load it, and if so then a signature for that binary will be saved into a .json file in the plugins directory. If the binary changes, then the user will be prompted again to load the new binary.
</p>
<h2><span class="mw-headline" id="Using_Custom_OPs_-_Plugin_Folder_Locations">Using Custom OPs - Plugin <span class="mw-lingo-term" data-lingo-term-id="b0f2b97dc5d2b76b26e040408bb1d8af">Folder</span> Locations</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=3" title="Edit section: Using Custom OPs - Plugin Folder Locations">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Custom OPs are used by simply placing the plugins in the correct location on disk. They will be detected when TouchDesigner starts. On Windows a plugin is a .dll file, with possible extra files included with it. On macOS a plugin is a .plugin folder.
</p><p>The Windows location is:<br><code>Documents/Derivative/Plugins</code><br>
Which is usually:<br><code>C:/Users/&lt;username&gt;/Documents/Derivative/Plugins</code>
</p><p>On macOS the location is:<br><code>/Users/&lt;username&gt;/Library/Application Support/Derivative/TouchDesigner099/Plugins</code>
</p><p>If this directory does not exist on your computer, you can just create it.
</p><p>Plugins can be placed in this directory directly, or placed in another directory contained within Plugins, with any name, to organized the plugins as desired. For example, the plugins directory could contain:
</p>
<pre>Documents/Derivative/Plugins/wave2.dll
Documents/Derivative/Plugins/Company1/feature1.dll
Documents/Derivative/Plugins/Company1/feature2.dll
Documents/Derivative/Plugins/Mine/customMerge.dll
</pre>
<p>The Custom OPs defined by wave2.dll, feature1.dll, feature2.dll and cusotmMerge.dll would all be loaded.
</p>
<h3><span class="mw-headline" id="Project_Specific_Custom_OPs">Project Specific Custom OPs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=4" title="Edit section: Project Specific Custom OPs">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Along with the system wide Plugins folder listed above, a Plugins folder can also be placed next to the <span class="mw-lingo-term" data-lingo-term-id="76746356f2d9fd021f01bc051bb2114f">.toe</span> file that is opened. This directory will also be searched for Plugins along with the system wide Plugins directory.
</p>
<h2><span class="mw-headline" id="Creating_Custom_OPs">Creating Custom OPs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=5" title="Edit section: Creating Custom OPs">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Sample_Projects">Sample Projects</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=6" title="Edit section: Sample Projects">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A collection of samples is available at the <a rel="nofollow" class="external text" href="https://github.com/TouchDesigner/CustomOperatorSamples">following Github repository</a>. Some more basic examples are also avaialable in the Samples/CPlusPlus folder in the TouchDesigner installation directory.
</p><p>With the exceptions of how they are loaded, a Custom OP is created the same way as the <a href="CPlusPlus_TOP.html" title="CPlusPlus TOP">CPlusPlus TOP</a>, <a href="CPlusPlus_CHOP.html" title="CPlusPlus CHOP">CPlusPlus CHOP</a>, <a href="CPlusPlus_SOP.html" title="CPlusPlus SOP">CPlusPlus SOP</a> and <a href="CPlusPlus_DAT.html" title="CPlusPlus DAT">CPlusPlus DAT</a> are created. Refer to <a href="https://docs.derivative.ca/Write_a_CPlusPlus_Plugin" title="Write a CPlusPlus Plugin">Write a CPlusPlus Plugin</a> for more information.
</p><p>When developing your Custom <span class="mw-lingo-term" data-lingo-term-id="7457cdd15d09bfc6c4dbb5d2b6f87390">OP</span>, you may find it more convenient to load it into a CPlusPlus node to more quickly recompile/reload the plugin instead of having to restart TouchDesigner every time you change your code. Once you are done developing you use the same plugin as a Custom <span class="mw-lingo-term" data-lingo-term-id="7457cdd15d09bfc6c4dbb5d2b6f87390">OP</span>.
</p>
<h3><span class="mw-headline" id="Converting_existing_CPlusPlus_projects_to_Custom_OPs">Converting existing CPlusPlus projects to Custom OPs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=7" title="Edit section: Converting existing CPlusPlus projects to Custom OPs">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Taking an existing CPlusPlus project and making it can be used as a custom OP is relatively quick. 
</p>
<h4><span class="mw-headline" id="Header_Files">Header Files</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=8" title="Edit section: Header Files">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>First, from the <code>Samples/CPlusPlus</code> folder for the correct OP type, take the <code>CPlusPlus_Common.h</code> and <code>*_CPlusPlusBase.h</code> header file (<span class="mw-lingo-term" data-lingo-term-id="28a7e2d07553a70b039bb585895e0bf0">SOP</span>, <span class="mw-lingo-term" data-lingo-term-id="6705777b712ee811e76fb07162081d63">TOP</span>, <span class="mw-lingo-term" data-lingo-term-id="8b9d2cce2836537aabe6f2e0dd5da293">CHOP</span>, <span class="mw-lingo-term" data-lingo-term-id="cc2bcf28d9ffc17fcbf169f3325607bb">DAT</span> instead of *), and replace the versions that are in the project you are upgrading.
</p>
<h4><span class="mw-headline" id="Plugin_Information">Plugin Information</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=9" title="Edit section: Plugin Information">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Next, you'll need to replace the functions <code>Get*APIVersion()</code> or <code>Get*PluginInfo()</code> with a new function containing one of these signatures (depending on the node type):
</p>
<pre>void FillTOPPluginInfo(<span class="mw-lingo-term" data-lingo-term-id="6705777b712ee811e76fb07162081d63">TOP</span>_PluginInfo *info);
void FillCHOPPluginInfo(<span class="mw-lingo-term" data-lingo-term-id="8b9d2cce2836537aabe6f2e0dd5da293">CHOP</span>_PluginInfo *info);
void FillSOPPluginInfo(<span class="mw-lingo-term" data-lingo-term-id="28a7e2d07553a70b039bb585895e0bf0">SOP</span>_PluginInfo *info);
void FillDATPluginInfo(<span class="mw-lingo-term" data-lingo-term-id="cc2bcf28d9ffc17fcbf169f3325607bb">DAT</span>_PluginInfo *info);
</pre>
<p>This function is used to define the name/label of the Custom <span class="mw-lingo-term" data-lingo-term-id="7457cdd15d09bfc6c4dbb5d2b6f87390">OP</span>, as well as other behavior such as how many inputs it allows. Examples of how to fill in this structure can be found in the previously mentioned example folders.
</p>
<h4><span class="mw-headline" id="Changed_functions">Changed functions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=10" title="Edit section: Changed functions">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Many of the virtual functions that your class overrides will have extra parameters or tweaks to the parameters (such as const changes). In most cases simply making your function signatures match those in the parent class should allow it to compile.
</p>
<h4><span class="mw-headline" id="OP_String"><span class="mw-lingo-term" data-lingo-term-id="7457cdd15d09bfc6c4dbb5d2b6f87390">OP</span>_String</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=11" title="Edit section: OP String">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>To provide a less error prone interface, any situation where a string is returned from your Custom OP to TouchDesigner, where the lifetime the memory needs to extend beyond the function call, it is done by assigning a value to an <span class="mw-lingo-term" data-lingo-term-id="7457cdd15d09bfc6c4dbb5d2b6f87390">OP</span>_String object that TouchDesigner provided for you. E.g:
</p>
<pre>chan-&gt;name = "chan_name";
</pre>
<p>would become:
</p>
<pre>chan-&gt;name-&gt;setString("chan_name");
</pre>
<p>You will likely have compile errors that will need to be fixed by replacing the = operation to a setString() function call.
</p>
<h3><span class="mw-headline" id="Building_on_macOS_using_XCode">Building on macOS using XCode</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=12" title="Edit section: Building on macOS using XCode">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Open one of the included .xcodeproj projects from the Samples/CPlusPlus directory.</li>
<li>Under the 'Product' menu select 'Archive'. If the build is successful a new window will come up showing a list of archives that have been created, including the one that was just created.</li>
<li>Select the one that was just created and click the 'Distribute Content' button. In the 'Select a method of distribution' dialog that comes up, select 'Build Products', and click 'Next'. Pick a location to save the archive and complete the operation.</li>
<li>In the folder where you saved the Build Products there will be a 'Products' folder and inside that &lt;projectname&gt;.plugin folder. This .plugin folder is what should be placed in your 'Plugins' folder to load this as a Custom <span class="mw-lingo-term" data-lingo-term-id="7457cdd15d09bfc6c4dbb5d2b6f87390">OP</span>.</li></ul><h2><span class="mw-headline" id="Issues_Loading_Custom_Operators">Issues Loading Custom Operators</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=13" title="Edit section: Issues Loading Custom Operators">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The most common issue that will be run into when loading a custom operator fails is missing dependencies. This means that there are extra .dll (Windows) or .dylib (macOS) files that the custom operator requires, such as openCV .dlls, or CUDA .dlls which can't be found when trying to load the custom operator.
</p>
<h3><span class="mw-headline" id="Windows">Windows</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=14" title="Edit section: Windows">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>On Windows the dependencies should be placed next to the .dll for the custom operator, unless otherwise specified by the custom operator's author. Very useful tools for finding dependencies required by a .dll are:<br><a rel="nofollow" class="external free" href="https://github.com/lucasg/Dependencies">https://github.com/lucasg/Dependencies</a><br><a rel="nofollow" class="external free" href="https://www.dependencywalker.com/">https://www.dependencywalker.com/</a><br>
Open the plugin binary with these tools and you can see the .dlls that plugin is dependent on and needs to be able to find to be able to load.
</p>
<h4><span class="mw-headline" id="Delay_Loaded_Libraries">Delay Loaded Libraries</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=15" title="Edit section: Delay Loaded Libraries">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>On Windows when building a .dll, other .dlls the primary one depends on can be 'Delay-Loaded'. This is an option in the Visual Studio project file, or /DELAYLOAD on the command line.
</p><p>When a .dll is specified as Delay-Loadded, it means that .dll isn't loaded until a line of code executes that actually requires that .dll, such as a function defined in the .dll, or using a type defined by that .dll. This is useful for cases where that .dll may not exist, or where you only want to cause it to load of certain conditions are met. For example if a .dll coming from an SDK requires a driver to be installed on the system (usually in C:/Windows/System32). 
</p><p>For example say the SDK file is SDK.dll, and the driver is Driver.dll, and SDK.dll has a regular dependency on Driver.dll (not delay-loaded).
Without handling this case, your Custom Operator will fail to load entirely on systems that are missing Driver.dll. In your visual studio project you can specify SDK.dll as 'Delay-Loaded'. Now your custom operator will load, but as soon as you use something provided by SDK.dll, the application will crash since it'll fail to load SDK.dll due to the missing Driver.dll. To avoid this you should first check that Driver.dll existing via
</p>
<pre> HMODULE lib = LoadLibrary(L"Driver.dll");
 if (lib)
 {
   // Driver.dll is found, we can use SDK.dll
 }
</pre>
<p>You should only do this check ones, likely in the constructor of your Custom <span class="mw-lingo-term" data-lingo-term-id="e1b3ec89ead7f83a9245ed5c9cacfdbf">Operator</span>.
</p><p>Another catch with Delay-Loaded .dlls is that while the initial load of your Custom Operator plugin will search next to that .dll for dependency .dlls, this is not the case for Delay-Loaded .dlls. That directory won't be searched. To make sure your delay-loaded .dlls are found you should manually load them into the process using LoadLibrary() before using something from that .dll that will trigger it to be loaded.
</p>
<h3><span class="mw-headline" id="macOS">macOS</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=16" title="Edit section: macOS">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>If the plugin requires linking with other .dylibs or frameworks, they should be included in the plugin bundle. The details of linking can depend on the libraries being used and to some extent personal preference, but we would suggest the following using rpaths:
</p>
<h4><span class="mw-headline" id="Plugin_Build_Setup:">Plugin Build Setup:</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=17" title="Edit section: Plugin Build Setup:">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<ul><li>In the General tab for your plugin target in Xcode, add the library or framework to the Frameworks and Libraries section and make sure "Embed &amp; Sign" is selected</li>
<li>In the Build Settings tab for the plugin target in Xcode, add a Runpath Search Paths setting for <code>@loader_path/../Frameworks</code> so the built plugin can locate libraries using the <code>@rpath</code> prefix</li></ul><h4><span class="mw-headline" id="Library_or_Framework_Setup:">Library or Framework Setup:</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit&amp;section=18" title="Edit section: Library or Framework Setup:">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<ul><li>If you are building the library or framework yourself using Xcode, set its Dynamic Library Install Name Base (in the Build Settings for the target in Xcode) to <code>@rpath</code> (so the computed install name will be <code>@rpath/libYourLibrary.dylib</code> (or <code>@rpath/YourFramework.framework/Versions/A/YourFramework</code> for a framework). If you are using another build system there will likely be a setting to achieve the same result</li>
<li>If you are using a pre-built third-party library or framework and can't change the build process, change its linker ID, which will then be embedded by the linker when your plugin is built so it can be located when it is loaded. It may already be configured to use an rpath - you can check using <code>otool -D libYourLibrary.dylib</code> - if the output shows <code>@rpath/libYourLibrary.dylib</code> then no change is needed. If it doesn't, you can use <code>install_name_tool -id @rpath/libYourLibrary.dylib libYourLibrary.dylib</code> to change its ID.</li></ul><p>You can check the linkage of your built plugin using <code>otool -L YourPlugin.plugin/Contents/MacOS/YourPlugin<code>
</code></code></p></div><div class="mw-lingo-tooltip" id="b0f2b97dc5d2b76b26e040408bb1d8af"><div class="mw-lingo-definition navigation-not-searchable"><div class="mw-lingo-definition-text">
<p>A Folder in TouchDesigner always refers to a Windows or macOS operating system directory/folder system that contain files and other folders. It does not refer to operators within TouchDesigner. See <a href="Network_Path.html" title="Network Path">Network Path</a>.
</p>
</div></div>
</div><div class="mw-lingo-tooltip" id="76746356f2d9fd021f01bc051bb2114f"><div class="mw-lingo-definition navigation-not-searchable"><div class="mw-lingo-definition-text">
<p>TOuch Environment file, the file type used by TouchDesigner to save your entire project.
</p>
</div></div>
</div><div class="mw-lingo-tooltip" id="7457cdd15d09bfc6c4dbb5d2b6f87390"><div class="mw-lingo-definition navigation-not-searchable"><div class="mw-lingo-definition-text">
<p>Any of the procedural data operators. OPs do all the work in TouchDesigner. They "cook" and output data to other OPs, which ultimately result in new images, data and audio being generated. See <a href="Node.html" title="Node">Node</a>.
</p>
</div></div>
</div><div class="mw-lingo-tooltip" id="28a7e2d07553a70b039bb585895e0bf0"><div class="mw-lingo-definition navigation-not-searchable"><div class="mw-lingo-definition-text">
<p>A <a href="Operator_Family.html" title="Operator Family">Operator Family</a> that reads, creates and modifies 3D points, polygons, lines, particles, surfaces, spheres and meatballs. Particles and point clouds are now done primarily on the GPU using TOPs.
</p>
</div></div>
</div><div class="mw-lingo-tooltip" id="6705777b712ee811e76fb07162081d63"><div class="mw-lingo-definition navigation-not-searchable"><div class="mw-lingo-definition-text">
<p>An <a href="Operator_Family.html" title="Operator Family">Operator Family</a> that creates, composites and modifies images, and reads/writes images and movies to/from files and the network. TOPs run on the graphics card's GPU.
</p>
</div></div>
</div><div class="mw-lingo-tooltip" id="8b9d2cce2836537aabe6f2e0dd5da293"><div class="mw-lingo-definition navigation-not-searchable"><div class="mw-lingo-definition-text">
<p>An <a href="Operator_Family.html" title="Operator Family">Operator Family</a> which operate on <a href="Channel.html" title="Channel">Channels</a> (a sequence of numbers (<a href="Sample.html" title="Sample">Samples</a>)) which are used for animation, audio, mathematics, simulation, logic, UI construction, and data streamed from/to devices and protocols.
</p>
</div></div>
</div><div class="mw-lingo-tooltip" id="cc2bcf28d9ffc17fcbf169f3325607bb"><div class="mw-lingo-definition navigation-not-searchable"><div class="mw-lingo-definition-text">
<p>An <a href="Operator_Family.html" title="Operator Family">Operator Family</a> that manipulates text strings: multi-line text or tables. Multi-line text is often a python <a href="Script.html" title="Script">Script</a> or <a href="GLSL.html" title="GLSL">GLSL</a> Shader, but can be any multi-line text. <a href="Table_DAT.html" title="Table DAT">Tables</a> are rows and columns of cells, each containing a text string.
</p>
</div></div>
</div><div class="mw-lingo-tooltip" id="e1b3ec89ead7f83a9245ed5c9cacfdbf"><div class="mw-lingo-definition navigation-not-searchable"><div class="mw-lingo-definition-text">
<p>Any of the procedural data operators. OPs do all the work in TouchDesigner. They "cook" and output data to other OPs, which ultimately result in new images, data and audio being generated. See <a href="Node.html" title="Node">Node</a>.
</p>
</div></div>
</div>
<!-- 
NewPP limit report
Cached time: 20250304144817
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.028 seconds
Real time usage: 0.648 seconds
Preprocessor visited node count: 66/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:2321-0!canonical and timestamp 20250304144816 and revision id 29158.
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;oldid=29158">https://docs.derivative.ca/index.php?title=Custom_Operators&amp;oldid=29158</a>"</div></div>
		<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		

<nav id="p-personal" class="vector-menu mw-portlet mw-portlet-personal vector-user-menu-legacy" aria-labelledby="p-personal-label" role="navigation"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="pt-login" class="mw-list-item"><a href="https://docs.derivative.ca/index.php?title=Special:UserLogin&amp;returnto=Custom+Operators" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			

<nav id="p-namespaces" class="vector-menu mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-namespaces-label" role="navigation"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-nstab-main" class="selected mw-list-item"><a href="Custom_Operators.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="new mw-list-item"><a href="https://docs.derivative.ca/index.php?title=Talk:Custom_Operators&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li><li id="ca-Experimental" class="new mw-list-item"><a href="https://docs.derivative.ca/index.php?title=Experimental:Custom_Operators&amp;action=edit&amp;redlink=1" title=" (page does not exist)"><span>Experimental</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	/>
	<label
		id="p-variants-label"
		 aria-label="Change language variant"
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Canadian English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			

<nav id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy" aria-labelledby="p-views-label" role="navigation"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href="Custom_Operators.html"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li></ul>
		
	</div>
</nav>

			

<nav id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	/>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<div>
			<h3 >
				<label for="searchInput">Search</label>
			</h3>
		<form action="https://docs.derivative.ca/index.php" id="searchform"
			class="vector-search-box-form">
			<div id="simpleSearch"
				class="vector-search-box-inner"
				 data-search-loc="header-navigation">
				<input class="vector-search-box-input"
					 type="search" name="search" placeholder="Search Derivative" aria-label="Search Derivative" autocapitalize="sentences" title="Search Derivative [f]" accesskey="f" id="searchInput"
				>
				<input type="hidden" name="title" value="Special:Search">
				<input id="mw-searchButton"
					 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
				<input id="searchButton"
					 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
			</div>
		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="Main_Page.html"
			title="Visit the main page"></a>
	</div>
	

<nav id="p-TouchDesigner" class="vector-menu mw-portlet mw-portlet-TouchDesigner vector-menu-portal portal" aria-labelledby="p-TouchDesigner-label" role="navigation"  >
	<h3
		id="p-TouchDesigner-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">TouchDesigner</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-Main-Page" class="mw-list-item"><a href="Main_Page.html"><span>Main Page</span></a></li><li id="n-Categories" class="mw-list-item"><a href="Special_Categories.html"><span>Categories</span></a></li><li id="n-Learn-TouchDesigner" class="mw-list-item"><a href="Learn_TouchDesigner.html"><span>Learn TouchDesigner</span></a></li><li id="n-Tutorials" class="mw-list-item"><a href="Tutorials.html"><span>Tutorials</span></a></li><li id="n-Interoperability" class="mw-list-item"><a href="Interoperability.html"><span>Interoperability</span></a></li><li id="n-Glossary" class="mw-list-item"><a href="TouchDesigner_Glossary.html"><span>Glossary</span></a></li><li id="n-Operators" class="mw-list-item"><a href="Operator.html"><span>Operators</span></a></li><li id="n-Python" class="mw-list-item"><a href="Python.html"><span>Python</span></a></li><li id="n-Python-Class-Reference" class="mw-list-item"><a href="TouchDesigner_Python_Classes.html"><span>Python Class Reference</span></a></li><li id="n-Palette" class="mw-list-item"><a href="Category_Palette.html"><span>Palette</span></a></li><li id="n-FAQ" class="mw-list-item"><a href="Frequently_Asked_Questions.html"><span>FAQ</span></a></li><li id="n-Recent-Doc-Edits" class="mw-list-item"><a href="Special_RecentChanges.html"><span>Recent Doc Edits</span></a></li><li id="n-Release-Notes" class="mw-list-item"><a href="Release_Notes.html"><span>Release Notes</span></a></li></ul>
		
	</div>
</nav>

	

<nav id="p-Downloads" class="vector-menu mw-portlet mw-portlet-Downloads vector-menu-portal portal" aria-labelledby="p-Downloads-label" role="navigation"  >
	<h3
		id="p-Downloads-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Downloads</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-TouchDesigner" class="mw-list-item"><a href="https://www.derivative.ca/download" rel="nofollow"><span>TouchDesigner</span></a></li><li id="n-Shared-Examples" class="mw-list-item"><a href="http://www.derivative.ca/Forum/viewforum.php?f=22" rel="nofollow"><span>Shared Examples</span></a></li></ul>
		
	</div>
</nav>


<nav id="p-tb" class="vector-menu mw-portlet mw-portlet-tb vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="https://docs.derivative.ca/Special:WhatLinksHere/Custom_Operators" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="https://docs.derivative.ca/Special:RecentChangesLinked/Custom_Operators" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;oldid=29158" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=info" title="More information about this page"><span>Page information</span></a></li><li id="t-cargopagevalueslink" class="mw-list-item"><a href="https://docs.derivative.ca/index.php?title=Custom_Operators&amp;action=pagevalues" rel="cargo-pagevalues"><span>Page values</span></a></li></ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 26 July 2023, at 18:15.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="Derivative_Privacy_policy.html">Privacy policy</a></li>
	<li id="footer-places-about"><a href="Derivative_About.html">About Derivative</a></li>
	<li id="footer-places-disclaimer"><a href="Derivative_General_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.028","walltime":"0.648","ppvisitednodes":{"value":66,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":100},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20250304144817","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":105});});</script>
</body>
<!-- Cached 20250304193604 -->

<!-- Mirrored from docs.derivative.ca/Custom_Operators by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 24 May 2025 00:56:43 GMT -->
</html>